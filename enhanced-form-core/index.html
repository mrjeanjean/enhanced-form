<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Enhanced form - Simple form demo</title>
    <style>
        textarea {
            width: 100%;
            min-height: 300px;
            /*display: none;*/
        }
    </style>
</head>
<body>
<h2>Form with editor</h2>
<form action="#" method="GET">
    <p>
        <label for="input-01">My first input</label>
        <input type="text" id="input-01" name="input-01">
    </p>
    <p>
        <label for="input-02">My second input</label>
        <input type="text" id="input-02" name="input-02">
    </p>
    <div>
        <textarea name="editor-content" id="input-target" cols="30" rows="10">[
  {
    "content": {
      "images": [
        [
          {
            "name": "image",
            "type": "ImageField",
            "content": {
              "url": "https://picsum.photos/id/185/500/500"
            }
          }
        ],
        [
          {
            "name": "image",
            "type": "ImageField",
            "content": {
              "url": "https://picsum.photos/id/112/500/500"
            }
          }
        ],
        [
          {
            "name": "image",
            "type": "ImageField",
            "content": {
              "url": "https://picsum.photos/id/185/500/500"
            }
          }
        ]
      ]
    },
    "type": "MultiImages",
    "id": "1gf3rhcp2037b4576078847"
  },
  {
    "content": {
      "items": [
        [
          {
            "name": "title",
            "type": "InputField",
            "content": "dsds"
          },
          {
            "name": "text",
            "type": "TextEditorField",
            "content": "<p>dsdsds</p>"
          }
        ],
        [
          {
            "name": "title",
            "type": "InputField",
            "content": "dsds"
          },
          {
            "name": "text",
            "type": "TextEditorField",
            "content": "<p>dsdsdsdsds</p>"
          }
        ]
      ]
    },
    "type": "Accordion",
    "id": "1gf3rth3g03bbc57b24c899"
  }
]</textarea>
    </div>
    <button type="submit">Save form</button>
</form>
<script type="module" defer>
    import {attachEnhancedForm, createTextField, createImageField, createInputField} from "./src/main";

    const enhancedForm = attachEnhancedForm(
        document.getElementById('input-target'),
        {
            onSelectFile: (options) => {
                let id = Math.round(Math.random() * 100 + 100);
                let width = options.imageOptions ? options.imageOptions.width : 500;
                let height = options.imageOptions ? options.imageOptions.height : 500;

                return Promise.resolve({
                    image: {
                        url: `https://picsum.photos/id/${id}/${width}/${height}`
                    }
                })
            }
        }
    );

    /*enhancedForm.editBlockProps('Image', {
        imageOptions: {
            width: 1240,
            height: 250
        }
    }, 'image');

    enhancedForm.createComponent(
        {
            name: 'NewStuff',
            menuLabel: 'New Stuff',
            fields: [
                createImageField('myImage'),
                createTextField('myText',{}, '<p>value</p>'),
                createInputField('myInput')
            ]
        }
    )

    enhancedForm.createComponent(
        {
            name: 'OtherStuff',
            menuLabel: 'Other element',
            fields: [
                createInputField('myInput'),
                createTextField('myText'),
            ]
        }
    )*/

    enhancedForm.render();
</script>
</body>
</html>
